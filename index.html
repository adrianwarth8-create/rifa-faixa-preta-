<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Rifa Faixa Preta â€“ Adrian Silva Warth</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #0b1c2d;
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 20px;
}

h1 { color: #e63946; }
h2 { color: #1d9bf0; }

.container {
  max-width: 520px;
  margin: auto;
  background: #14213d;
  padding: 20px;
  border-radius: 12px;
}

input, button {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 6px;
  border: none;
  font-size: 16px;
}

button {
  background: #e63946;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
}

button:hover { background: #ff4d5a; }

.numeros {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
  margin: 15px 0;
}

.numero {
  background: #1d3557;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
}

.numero.selecionado {
  background: #2ecc71;
  color: #000;
  font-weight: bold;
}

.numero.ocupado {
  background: #e63946;
  cursor: not-allowed;
}

.contador {
  font-size: 18px;
  margin-bottom: 15px;
}

footer {
  margin-top: 20px;
  font-size: 14px;
  opacity: 0.85;
}
</style>
</head>

<body>

<h1>RIFA â€“ FAIXA PRETA ğŸ¥‹</h1>
<h2>Adrian Silva Warth</h2>

<div class="contador" id="contador"></div>

<div class="container">

<p><strong>ğŸ¯ Objetivo:</strong> arrecadar fundos para a troca de faixa preta</p>
<p><strong>ğŸ’° Valor:</strong> R$ 5,00 por nÃºmero</p>

<p><strong>ğŸ† PrÃªmios:</strong><br>
ğŸ¥‡ Ovelha carneada<br>
ğŸ¥ˆ Cesta Cacau Show
</p>

<p><strong>ğŸ“… Sorteio:</strong> 25 de agosto Ã s 10h<br>
<strong>ğŸ“ TransmissÃ£o:</strong> Instagram
</p>

<p><strong>ğŸ“§ Pix:</strong> adrianwarth8@gmail.com</p>

<hr>

<h3>Escolha seu nÃºmero</h3>
<div class="numeros" id="numeros"></div>

<input type="text" id="nome" placeholder="Seu nome completo">
<input type="text" id="whats" placeholder="WhatsApp com DDD">

<button onclick="reservar()">Reservar nÃºmero</button>
</div>

<footer>
ApÃ³s o pagamento via Pix, o nÃºmero serÃ¡ confirmado.<br>
WhatsApp: 55 9999-29198
</footer>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzf34zIFwp_hLZ_v25zEoXAD63BQGOJDRMRfsmxkVrP0FR9r0jCz1UkmuYMy7JMNRQLEw/exec";

let selecionado = null;
let numerosOcupados = [];

// GERAR NÃšMEROS (altere para 1000 depois)
const numerosDiv = document.getElementById("numeros");
for (let i = 1; i <= 100; i++) {
  const div = document.createElement("div");
  div.className = "numero";
  div.textContent = i.toString().padStart(3, "0");
  div.onclick = () => selecionar(div);
  numerosDiv.appendChild(div);
}

// BUSCAR NÃšMEROS OCUPADOS
fetch(SCRIPT_URL)
  .then(res => res.json())
  .then(lista => {
    numerosOcupados = lista;
    document.querySelectorAll(".numero").forEach(div => {
      if (numerosOcupados.includes(div.textContent)) {
        div.classList.add("ocupado");
        div.onclick = null;
      }
    });
  });

// SELECIONAR
function selecionar(el) {
  if (el.classList.contains("ocupado")) return;
  document.querySelectorAll(".numero").forEach(n => n.classList.remove("selecionado"));
  el.classList.add("selecionado");
  selecionado = el.textContent;
}

// RESERVAR
function reservar() {
  const nome = document.getElementById("nome").value.trim();
  const whats = document.getElementById("whats").value.trim();

  if (!nome || !whats || !selecionado) {
    alert("Preencha todos os campos e escolha um nÃºmero.");
    return;
  }

  const dados = new URLSearchParams();
  dados.append("nome", nome);
  dados.append("whats", whats);
  dados.append("numero", selecionado);

  fetch(SCRIPT_URL, { method: "POST", body: dados })
    .then(() => {
      alert("NÃºmero reservado com sucesso! Envie o Pix para confirmar.");
      window.open(
        `https://wa.me/55${whats.replace(/\D/g,"")}?text=OlÃ¡! Reservei o nÃºmero ${selecionado} na rifa da faixa preta. JÃ¡ vou enviar o Pix.`,
        "_blank"
      );
      location.reload();
    })
    .catch(() => alert("Erro ao reservar. Tente novamente."));
}

// CONTADOR
const dataSorteio = new Date("2026-08-25T10:00:00").getTime();
setInterval(() => {
  const agora = new Date().getTime();
  const diff = dataSorteio - agora;

  if (diff <= 0) {
    document.getElementById("contador").innerText = "â° Sorteio hoje!";
    return;
  }

  const d = Math.floor(diff / (1000*60*60*24));
  const h = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const m = Math.floor((diff%(1000*60*60))/(1000*60));
  const s = Math.floor((diff%(1000*60))/1000);

  document.getElementById("contador").innerText =
    `â³ ${d}d ${h}h ${m}m ${s}s`;
}, 1000);
</script>

</body>
</html>
